{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43954611-e80f17bdd29da3f9a3f1b55c2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","export function renderImageGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <div class=\"gallery-item\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <div class=\"gallery-item-info\">\n                    <p>Likes: ${likes}</p>\n                    <p>Views: ${views}</p>\n                    <p>Comments: ${comments}</p>\n                    <p>Downloads: ${downloads}</p>\n                </div>\n            </div>\n        `;\n      }\n    )\n    .join('');\n}\n","import './css/styles.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImageGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet lightbox;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.query.value.trim();\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Search query cannot be empty',\n    });\n    return;\n  }\n\n  await fetchImagesAndRender(false);\n}\n\nasync function onLoadMore() {\n  page += 1;\n  await fetchImagesAndRender(true);\n}\n\nasync function fetchImagesAndRender(shouldScroll) {\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found. Try again!',\n      });\n      return;\n    }\n    const markup = renderImageGallery(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n\n    if (data.hits.length < 15 || page * 15 >= data.totalHits) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    if (shouldScroll) {\n      const { height: cardHeight } = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","renderImageGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loadMoreBtn","lightbox","onSearch","onLoadMore","event","iziToast","fetchImagesAndRender","shouldScroll","data","markup","SimpleLightbox","cardHeight","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAY/D,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACL,CAAG,GACe,IAClB,CClBO,SAASE,EAAmBC,EAAQ,CACzC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,2BAEYL,CAAa;AAAA,gCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gCAG1BC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,SAKxC,EACA,KAAK,EAAE,CACZ,CCpBA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIf,EAAQ,GACRC,EAAO,EACPe,EAEJH,EAAW,iBAAiB,SAAUI,CAAQ,EAC9CF,EAAY,iBAAiB,QAASG,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAO7B,GANAA,EAAM,eAAc,EACpBnB,EAAQmB,EAAM,cAAc,SAAS,MAAM,MAAM,OACjDlB,EAAO,EACPa,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAExBf,IAAU,GAAI,CAChBoB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EACD,MACD,CAED,MAAMC,EAAqB,EAAK,CAClC,CAEA,eAAeH,GAAa,CAC1BjB,GAAQ,EACR,MAAMoB,EAAqB,EAAI,CACjC,CAEA,eAAeA,EAAqBC,EAAc,CAChD,GAAI,CACF,MAAMC,EAAO,MAAMxB,EAAYC,EAAOC,CAAI,EAC1C,GAAIsB,EAAK,KAAK,SAAW,EAAG,CAC1BH,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACjB,CAAO,EACD,MACD,CACD,MAAMI,EAASpB,EAAmBmB,EAAK,IAAI,EAqB3C,GApBAT,EAAQ,mBAAmB,YAAaU,CAAM,EACzCR,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIS,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACtB,CAAO,EAKCF,EAAK,KAAK,OAAS,IAAMtB,EAAO,IAAMsB,EAAK,WAC7CH,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EACDL,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,QAG1BO,EAAc,CAChB,KAAM,CAAE,OAAQI,CAAU,EAAK,SAC5B,cAAc,eAAe,EAC7B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CACF,OAAQC,EAAO,CACdP,EAAS,MAAM,CAAE,MAAO,QAAS,QAASO,EAAM,OAAO,CAAE,CAC1D,CACH"}