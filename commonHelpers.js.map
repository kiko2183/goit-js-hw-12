{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43954611-e80f17bdd29da3f9a3f1b55c2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n}\n","export function renderImageGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n            <div class=\"gallery-item\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" />\n                </a>\n                <div class=\"gallery-item-info\">\n                    <p>Likes: ${likes}</p>\n                    <p>Views: ${views}</p>\n                    <p>Comments: ${comments}</p>\n                    <p>Downloads: ${downloads}</p>\n                </div>\n            </div>\n        `;\n      }\n    )\n    .join('');\n}\n","import './css/styles.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImageGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  query = event.currentTarget.elements.query.value.trim();\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Search query cannot be empty',\n    });\n    return;\n  }\n  page = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n  await fetchImagesAndRender();\n}\n\nasync function onLoadMore() {\n  page += 1;\n  await fetchImagesAndRender();\n}\n\nasync function fetchImagesAndRender() {\n  try {\n    const data = await fetchImages(query, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'No images found. Try again!',\n      });\n      return;\n    }\n    const markup = renderImageGallery(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    }).refresh();\n\n    if (data.hits.length < 15 || page * 15 >= data.totalHits) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","renderImageGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loadMoreBtn","onSearch","onLoadMore","event","iziToast","fetchImagesAndRender","data","markup","SimpleLightbox","cardHeight","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAY/D,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACX,CACL,CAAG,GACe,IAClB,CClBO,SAASE,EAAmBC,EAAQ,CACzC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,2BAEYL,CAAa;AAAA,gCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,gCAG1BC,CAAK;AAAA,gCACLC,CAAK;AAAA,mCACFC,CAAQ;AAAA,oCACPC,CAAS;AAAA;AAAA;AAAA,SAKxC,EACA,KAAK,EAAE,CACZ,CCpBA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIf,EAAQ,GACRC,EAAO,EAEXY,EAAW,iBAAiB,SAAUG,CAAQ,EAC9CD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAG7B,GAFAA,EAAM,eAAc,EACpBlB,EAAQkB,EAAM,cAAc,SAAS,MAAM,MAAM,OAC7ClB,IAAU,GAAI,CAChBmB,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACf,CAAK,EACD,MACD,CACDlB,EAAO,EACPa,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAC5B,MAAMK,EAAoB,CAC5B,CAEA,eAAeH,GAAa,CAC1BhB,GAAQ,EACR,MAAMmB,EAAoB,CAC5B,CAEA,eAAeA,GAAuB,CACpC,GAAI,CACF,MAAMC,EAAO,MAAMtB,EAAYC,EAAOC,CAAI,EAC1C,GAAIoB,EAAK,KAAK,SAAW,EAAG,CAC1BF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACjB,CAAO,EACD,MACD,CACD,MAAMG,EAASlB,EAAmBiB,EAAK,IAAI,EAC3CP,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9C,IAAIC,EAAe,aAAc,CAC/B,aAAc,MACd,aAAc,GACpB,CAAK,EAAE,QAAO,EAENF,EAAK,KAAK,OAAS,IAAMpB,EAAO,IAAMoB,EAAK,WAC7CF,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,EACDJ,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,QAG9B,KAAM,CAAE,OAAQS,CAAU,EAAK,SAC5B,cAAc,eAAe,EAC7B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,OAAQC,EAAO,CACdN,EAAS,MAAM,CAAE,MAAO,QAAS,QAASM,EAAM,OAAO,CAAE,CAC1D,CACH"}